{"version":3,"sources":["../../src/build/collect-build-traces.ts"],"names":["Span","TRACE_IGNORES","getFilesMapFromReasons","TRACE_OUTPUT_VERSION","TURBO_TRACE_DEFAULT_MEMORY_LIMIT","path","fs","loadBindings","nonNullable","ciEnvironment","debugOriginal","isMatch","defaultOverrides","nodeFileTrace","normalizePagePath","normalizeAppPath","isError","debug","collectBuildTraces","dir","config","distDir","pageKeys","pageInfos","staticPages","nextBuildSpan","name","hasSsrAmpPages","buildTraceContext","outputFileTracingRoot","startTime","Date","now","turboTasksForTrace","bindings","runTurbotrace","experimental","turbotrace","isWasm","turbo","startTrace","turbotraceOutputPath","turbotraceFiles","createTurboTasks","memoryLimit","entriesTrace","chunksTrace","appDir","buildTraceContextAppDir","depModArray","entryNameMap","outputPath","action","depModSet","Set","filesTracedInEntries","contextDirectory","input","entriesToTrace","filesTracedFromEntries","map","f","join","filter","includes","startsWith","has","length","entryName","Array","from","Object","entries","k","traceOutputPath","traceOutputDir","dirname","file","relative","outputPagesPath","substring","existedNftFile","readFile","then","existedContent","JSON","parse","catch","version","files","push","filesSet","writeFile","stringify","outputFileTracingIncludes","outputFileTracingExcludes","excludeGlobKeys","keys","traceChild","traceAsyncFn","nextServerTraceOutput","nextMinimalTraceOutput","root","isStandalone","output","nextServerEntry","require","resolve","sharedEntriesSet","value","paths","incrementalCacheHandlerPath","isAbsolute","serverEntries","Boolean","minimalServerEntries","additionalIgnores","glob","forEach","exclude","add","serverIgnores","hasNextSupport","outputFileTracingIgnores","serverIgnoreFn","pathname","contains","dot","traceContext","serverTracedFiles","minimalServerTracedFiles","addToTracedFiles","base","dest","replace","makeTrace","logLevel","processCwd","logDetail","showAll","logAll","vanillaFiles","minimalFiles","set","chunksToTrace","result","mixedModules","p","e","code","match","readlink","stat","reasons","fileList","esmFileList","parentFilesMap","tracedFiles","curFiles","get","curFile","filePath","entryNameFilesMap","Promise","all","Map","entryNameFiles","isApp","isPages","route","entryOutputPath","existingTrace","curTracedFiles","sort","moduleTypes","type","modulePath","relativeModulePath","contextDir","item","readdir","itemPath","includeExcludeSpan","resolvedTraceIncludes","includeGlobKeys","globOrig","pattern","reject","cwd","nodir","err","page","pages","pageInfo","find","runtime","combinedIncludes","combinedExcludes","curGlob","include","size","traceFile","pageDir","traceContent","includeGlob","results","resolvedInclude","combined","resolvedGlobs","delete"],"mappings":"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"}